<!DOCTYPE html>
<html lang="en">
<head>
  <title>ðŸŒŽ Canadian Airlines and COVID-19</title>
  <meta charset="utf-8">

  <meta name="description" content="A data visualization: Flights per day from Canadian airlines on March 2020">
  <meta name="author" content="Pedro Despouy">
  <meta name='viewport' content='width=device-width, initial-scale=1'>

  <!-- SOCIAL - TWITTER -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@PedroDespouy">
  <meta name="twitter:title" content="Canadian Airlines and Coronavirus">
  <meta name="twitter:description" content="A data visualization: Flights per day from Canadian airlines on March 2020.">
  <meta name="twitter:image" content="https://despouy.ca/flights-canada-corona/img/preview.jpg">
  <!-- SOCIAL - OPEN -->
  <meta property="og:url" content="https://despouy.ca/flights-canada-corona/index.html">
  <meta property="og:title" content="Canadian Airlines and Coronavirus">
  <meta property="og:description" content="A data visualization: Flights per day from Canadian airlines on March 2020.">
  <meta property="og:site_name" content="Canadian Airlines and Coronavirus">
  <meta property="og:image" content="https://despouy.ca/flights-canada-corona/img/preview.jpg">

  <script src="static/d3.v5.js"></script>
  <script src="static/topojson-client.js"></script>
  <script src="static/d3-simple-slider.min.js"></script>
  <link rel="stylesheet" type="text/css" href="static/picnic.min.css">
  <link rel="stylesheet" type="text/css" href="static/app.css">
</head>

<body onload="reset();">
  <div>
    <h4 >Flights per day from Canadian airlines</h4>
    <p id="subh4" >Impact on air travel from Coronavirus, March 2020</p>
  </div>
  <div id="header-text">
    <span id="value-flights"></span><span> flights on </span>
    <span>March </span><span id="value-time"></span>
    <!-- if you want to add th/st/nd to dates -->
    <!-- <sup id="value-time-sup"></sup> -->
  </div>
  <div id="main">

    <!-- map -->
    <svg id="map" width="640" ></svg>
    <i>Drag to rotate the world</i>
  </div>
  <div id="footer" >
    <div id="controls" class="col-sm" >
      <span id="controls-left">
        <button id="play" class="controls-action" onclick="play();"  >â–¶</button>
        <button id="pause" class="controls-action" onclick="pause();" disabled="">â–Œâ–Œ</button>
      </span>
      <span id="controls-right">
        <p id="footer-label" >March</p>
        <span id="slider-time" onclick="pause();"></span>
      </span>
    </div>
  </div>
  <div id="footer-text">

    <h2 id="footer-title">Canadian Airlines and Coronavirus</h2>
    <span id="footer-subtitle">Visualizing 21,608 flights from 497 aircrafts</span><br>
    <span class="footer-detail">Updated: April 14, 2020</span><br>
    <span class="footer-detail">Download <a href="download.csv" download>CSV</a></span><br><br>

    Intro. In mid-March 2020, all of Canada's provinces and territories declared states of emergency. Canada severely restricted its border access, barring travellers from all countries with some exceptions. Number of flights per day from Canadian airlines dropped ~80%.<br><br>

    Sources. Canadian Airlines were pulled from Wikipedia's page: "List of airlines of Canada" [1]. Aircrafts' owner were taken from OpenSky Network's datasets [2]. Daily flights were pulled from OpenSky Network's API [3]. All flights where first seen is between March 1, 2020 12:00:00 AM GMT and March 31, 2020 11:59:59 PM GMT. Airport coordinates were extracted from OurAirports [4]<br><br>

    Methodology. From the list of Canadian airlines, we only use airlines with a known callsign (32). Then we can filter the aircrafts owned by Canadian airlines from the aircraft database (1014). Data for each aircraft was queried individually from the API - there may have discrepancies given the number of request. Flights with unknown arrival or departure airport were removed. Flights with same arrival and departure airport were removed as well. After cleansing, we end up with 21,608 flights from 497 aircrafts.<br><br>

    Tech. Data analysis was done on Python with pandas. Data is stored in SQLite, and exported as a JSON file. D3 Javascript library was used to visualize globe. Lots of code from Mike Bostock 2011 <a href="http://mbostock.github.io/d3/talk/20111018/azimuthal.html" class="a-discrete" target="_blank">talk</a> and Derek Watkins' <a href="http://bl.ocks.org/dwtkns/4686432" class="a-discrete" target="_blank">globe</a>. <a href="https://github.com/johnwalley/d3-simple-slider" class="a-discrete" target="_blank">d3-simple-slider</a> for slider. <a href="https://picnicss.com/" class="a-discrete" target="_blank">Picnic CSS</a> was used for style.<br><br>

    Thanks. Dario Saveliovsky for its valuable feedback and support.<br><br>

    Thank you,<br>
    <a href="https://www.despouy.ca/">Pedro</a><br><br>

    <div id="footer-text-footer">
      [1] https://en.wikipedia.org/wiki/List_of_airlines_of_Canada<br>
      [2] https://opensky-network.org/datasets/<br>
      [3] https://opensky-network.org/apidoc/<br>
      [4] https://ourairports.com/data/<br><br>
    </div>
  </div>
</body>

<script src="static/app.js"></script>

</html>
